// 
// Header file auto-generated by VORTEX SETTINGS WIZARD
// 
// TODO: Just testing
// 

#pragma once

#include <ostream>

#include <nlohmann/json_fwd.hpp>

#include "core/common/types.hpp"
#include "core/settings/json/any_settings.hpp"

namespace vortex::turb::legacy::settings
{

class ExecutionSettings
{
public:
    ExecutionSettings() noexcept = default;
    explicit ExecutionSettings( nlohmann::json * data_p );
    explicit ExecutionSettings( core::settings::json::AnySettings s )
    :   ExecutionSettings( s.data() )
    {}

public:

    [[nodiscard]] nlohmann::json * data() const noexcept
    {
        return m_data_p;
    }
    [[nodiscard]] bool is_empty() const noexcept
    {
        return data() == nullptr;
    }
    [[nodiscard]] core::settings::json::AnySettings as_any() const noexcept
    {
        return core::settings::json::AnySettings{ data() };
    }

    ExecutionSettings& update_with( nlohmann::json * other_data_p );
    ExecutionSettings& update_with( core::settings::json::AnySettings const& other )
    {
        return update_with( other.data() );
    }
    ExecutionSettings& update_with( ExecutionSettings const& other )
    {
        return update_with( other.data() );
    }

    [[nodiscard]] consteval bool has_extra_data() const noexcept
    {
        return true;
    }
    [[nodiscard]] std::size_t extra_data_size() const
    {
        return job_name().size() + 1ull + grant_no().size() + 1ull;
    }

    [[nodiscard]] std::string to_string() const;
    std::ostream& stringify( std::ostream& os, int indent_size, int indent_level, bool display_all ) const;

    void validate() const;

    friend std::ostream& operator<<( std::ostream& os, ExecutionSettings const& s );

    friend bool operator==( ExecutionSettings const& lhs, ExecutionSettings const& rhs );
    friend bool operator!=( ExecutionSettings const& lhs, ExecutionSettings const& rhs )
    {
        return !( lhs == rhs );
    }

    // "job_name" property
    [[nodiscard]] std::string_view job_name() const;
    [[nodiscard]] bool has_job_name_set() const noexcept;
    [[nodiscard]] constexpr std::string_view default_job_name() const noexcept
    {
        return "default_job";
    }
    void reset_job_name();
    void set_job_name( std::string const& job_name );
    void set_job_name( std::string && job_name );
    void set_job_name( std::string_view job_name )
    {
        set_job_name( std::string{ job_name } );
    }
    void set_job_name( char const * job_name )
    {
        set_job_name( std::string{ job_name } );
    }

    // "grant_no" property
    [[nodiscard]] std::string_view grant_no() const;
    [[nodiscard]] bool has_grant_no_set() const noexcept;
    [[nodiscard]] constexpr std::string_view default_grant_no() const noexcept
    {
        return std::string_view{};
    }
    void reset_grant_no();
    void set_grant_no( std::string const& grant_no );
    void set_grant_no( std::string && grant_no );
    void set_grant_no( std::string_view grant_no )
    {
        set_grant_no( std::string{ grant_no } );
    }
    void set_grant_no( char const * grant_no )
    {
        set_grant_no( std::string{ grant_no } );
    }

    // "cpu_node_count" property
    [[nodiscard]] i32 cpu_node_count() const;
    [[nodiscard]] bool has_cpu_node_count_set() const noexcept;
    [[nodiscard]] constexpr i32 default_cpu_node_count() const noexcept
    {
        return 1;
    }
    void reset_cpu_node_count();
    void set_cpu_node_count( i32 cpu_node_count );

    // "wct_limit" property
    [[nodiscard]] f64 wct_limit() const;
    [[nodiscard]] bool has_wct_limit_set() const noexcept;
    [[nodiscard]] constexpr f64 default_wct_limit() const noexcept
    {
        return 60.0;
    }
    void reset_wct_limit();
    void set_wct_limit( f64 wct_limit );

    // "process_count" property
    [[nodiscard]] i32 process_count() const;
    [[nodiscard]] bool has_process_count_set() const noexcept;
    [[nodiscard]] constexpr i32 default_process_count() const noexcept
    {
        return 1;
    }
    void reset_process_count();
    void set_process_count( i32 process_count );

    // "is_node_overcommit_enabled" property
    [[nodiscard]] bool is_node_overcommit_enabled() const;
    [[nodiscard]] bool has_is_node_overcommit_enabled_set() const noexcept;
    [[nodiscard]] constexpr bool default_is_node_overcommit_enabled() const noexcept
    {
        return bool{};
    }
    void reset_is_node_overcommit_enabled();
    void set_is_node_overcommit_enabled( bool is_node_overcommit_enabled );


private:
    void pre_validate_all();
    static void pre_validate_job_name( [[maybe_unused]] std::string_view job_name );
    static void pre_validate_grant_no( [[maybe_unused]] std::string_view grant_no );
    static void pre_validate_cpu_node_count( [[maybe_unused]] i32 cpu_node_count );
    static void pre_validate_wct_limit( [[maybe_unused]] f64 wct_limit );
    static void pre_validate_process_count( [[maybe_unused]] i32 process_count );
    static void pre_validate_is_node_overcommit_enabled( [[maybe_unused]] bool is_node_overcommit_enabled );

private:
    nlohmann::json * m_data_p = nullptr;
}; // end of class ExecutionSettings

} // end of namespace vortex::turb::legacy::settings
